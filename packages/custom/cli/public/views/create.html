<section ng-controller="CLIExerciseEditController" ng-init="findSubjects()">

<form class="form-horizontal" name="challengeForm" ng-submit="create()">

<div class="form-group">
<label class="col-sm-2 control-label">Subject</label>
<div class="col-md-3 col-sm-4">
  <select ng-model="exercise.subject" ng-options="subject as subject.name for subject in subjects" class="form-control">
  </select>
</div>
</div>

<div class="form-group">
  <label class="col-sm-2 control-label">Module</label>
<div class="col-md-3 col-sm-4">
  <select ng-model="exercise.module" ng-options="module as module for module in exercise.subject.modules" class="form-control">
  </select>
</div>
</div>

<div class="form-group">
<label class="col-sm-2 control-label">Challenge</label>
<div class="col-sm-9">
    <textarea class="form-control" ng-model="exercise.challenge" rows="3"></textarea>
</div>
</div>

<div class="form-group" ng-class="{'has-error':!val()}">
  <label class="col-sm-2 control-label">Sample</label>
<div class="col-md-3 col-sm-4">
  <input ng-model="exercise.sample" class="form-control">
</div>
</div>

<div class="form-group">
<label class="col-sm-2 control-label">Solution</label>
<div class="col-sm-9">
    <textarea class="form-control" ng-model="exercise.solution" rows="7"
      style="font-family:monospace;"></textarea>
</div>
</div>

<div class="form-group">
<label class="col-sm-2 control-label">Output</label>
<div class="col-sm-9">
    <textarea class="form-control" ng-model="exercise.output" rows="7"
      style="font-family:monospace;"></textarea>
</div>
</div>

<div class="form-group">
  <label class="col-sm-2 control-label">Next</label>
<div class="col-md-3 col-sm-4">
  <select ng-model="exercise.next" ng-options="ex._id as ex.challenge for ex in nextEx"
  class="form-control" ng-watch="modulesBySubject">
</select>
<span class="input-group-addon" ng-click="exercise.next=null">X</span>
</div>

<div class="col-sm-offset-2">
<button type="submit" class="btn btn-info">Save</button>
</div>
</form>
</section>
